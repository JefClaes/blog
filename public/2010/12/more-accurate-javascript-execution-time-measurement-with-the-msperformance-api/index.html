<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>More accurate javascript execution time measurement with the msPerformance API - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="More accurate javascript execution time measurement with the msPerformance API">
<meta itemprop="description" content="A cool feature of Internet Explorer 9 is the msPerformance API. This API helps you to accurately measure the performance of a webpage. A lot of developers have built their own performance measurement constructs over the years, based on the Date function, but the results of these constructs can be way off!
John Resig (jQuery inventor) has an in detail blogpost where he discovers where custom javascript execution time measurement goes wrong.">
<meta itemprop="datePublished" content="2010-12-10T20:00:00&#43;01:00" />
<meta itemprop="dateModified" content="2010-12-10T20:00:00&#43;01:00" />
<meta itemprop="wordCount" content="368">



<meta itemprop="keywords" content="CodeSnippets,javascript,Browsers," /><meta property="og:title" content="More accurate javascript execution time measurement with the msPerformance API" />
<meta property="og:description" content="A cool feature of Internet Explorer 9 is the msPerformance API. This API helps you to accurately measure the performance of a webpage. A lot of developers have built their own performance measurement constructs over the years, based on the Date function, but the results of these constructs can be way off!
John Resig (jQuery inventor) has an in detail blogpost where he discovers where custom javascript execution time measurement goes wrong." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2010/12/more-accurate-javascript-execution-time-measurement-with-the-msperformance-api/" />
<meta property="article:published_time" content="2010-12-10T20:00:00+01:00" />
<meta property="article:modified_time" content="2010-12-10T20:00:00+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="More accurate javascript execution time measurement with the msPerformance API"/>
<meta name="twitter:description" content="A cool feature of Internet Explorer 9 is the msPerformance API. This API helps you to accurately measure the performance of a webpage. A lot of developers have built their own performance measurement constructs over the years, based on the Date function, but the results of these constructs can be way off!
John Resig (jQuery inventor) has an in detail blogpost where he discovers where custom javascript execution time measurement goes wrong."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">10</span>
							<span class="rest">Dec 2010</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">More accurate javascript execution time measurement with the msPerformance API</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>A cool feature of <a href="http://windows.microsoft.com/ie9">Internet Explorer
9</a> is the <a href="http://msdn.microsoft.com/en-us/library/ff975118(VS.85).aspx">msPerformance
API</a>. This
API helps you to accurately measure the performance of a webpage. A lot
of developers have built their own performance measurement constructs
over the years, based on the Date function, but the results of these
constructs can be way off!</p>
<p><a href="http://en.wikipedia.org/wiki/John_Resig">John Resig</a> (jQuery inventor)
has <a href="http://ejohn.org/blog/accuracy-of-javascript-time/">an in detail
blogpost</a> where he
discovers where custom javascript execution time measurement goes
wrong.</p>
<blockquote>
<p>In Summary: Testing JavaScript performance on Windows XP and Vista is
a crapshoot, at best. With the system times constantly being rounded
down to the last queried time (each about 15ms apart) the quality of
performance results is seriously compromised. Dramatically improved
performance test suites are going to be needed in order to filter out
these impurities, going forward.</p>
</blockquote>
<p>Browsers know exactly how long it takes to load webpages and execute
scripts. IE9 now makes it possible to consume this information through
the msPerformance API.</p>
<p>If you are interested in performance marks of the document loading, you
can read properties of the
<a href="http://msdn.microsoft.com/en-us/library/ff975075(v=VS.85).aspx">msPerfomanceTiming</a>
object. If you are, like me, interested in measuring execution time of a
specifc function, you can use some functions of the msPerformance
object. Have a look at the following codesnippet.</p>
<pre><code>function runTest(){                

    var msPerformance = window.msPerformance;

    

    if (msPerformance){        

        msPerformance.mark(&quot;writeLoopBegin&quot;);

        

        for (var  i = 0; i &lt; 50000; i++){

            document.writeln(i);

        }        

        

        msPerformance.markAndMeasure(&quot;writeLoopEnd&quot;, &quot;writeLoopMeasure&quot;, &quot;writeLoopBegin&quot;);        

        var res = msPerformance.getMeasure(&quot;writeLoopMeasure&quot;);

        

        alert(res + &quot; ms elepased.&quot;);    

    } else {

        document.write(&quot;msPerformance isn't available in your browser.&quot;)

    }

}
</code></pre>
<p>The first thing you have to do is get a reference to the msPerformance
object. To start measuring you need to call the
<a href="http://msdn.microsoft.com/en-us/library/ff975187(v=VS.85).aspx">mark</a>
function. After marking, you can run the code you want to measure. When
that is done, you need to call the
<a href="http://msdn.microsoft.com/en-us/library/ff975188(v=VS.85).aspx">markAndMeasure</a>
function. Once the end is marked an measurement is finished, you can get
the results by calling the
<a href="http://msdn.microsoft.com/en-us/library/ff975185(v=VS.85).aspx">getMeasure</a>
function.</p>
<p>See it in action <a href="http://pastehtml.com/view/1cai752.html">here</a>.</p>
<p><strong>What about standards?</strong></p>
<p>You probably noticed by the ms prefix that this isn&rsquo;t part of the
standards yet. It does look like there are efforts being made by the W3C
to get a <a href="http://test.w3.org/webperf/specs/NavigationTiming/">performance measurement API into the
standards</a> though.</p>
<p><strong>Is this something you have been waiting for?</strong></p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/codesnippets">CodeSnippets</a></li>
							
							<li><a href="/tags/javascript">javascript</a></li>
							
							<li><a href="/tags/browsers">Browsers</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2010  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
