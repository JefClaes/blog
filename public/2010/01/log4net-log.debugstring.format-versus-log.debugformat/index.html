<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Log4Net: log.Debug(String.Format()) versus log.DebugFormat() - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Log4Net: log.Debug(String.Format()) versus log.DebugFormat()">
<meta itemprop="description" content="Log4net is one of the most popular opensource logging frameworks available in the .NET world. I&rsquo;ve been using this framework for over a year now, and today I discovered something new.
I often use string.Format() to format my log messages. Earlier this morning I made a typo formatting my message and an Exception was thrown in the beginning of my method which caused the application flow to break. You can avoid this by using the DebugFormat() method.">
<meta itemprop="datePublished" content="2010-01-20T20:30:00&#43;01:00" />
<meta itemprop="dateModified" content="2010-01-20T20:30:00&#43;01:00" />
<meta itemprop="wordCount" content="307">



<meta itemprop="keywords" content="CodeSnippets,Opensource,Tips," /><meta property="og:title" content="Log4Net: log.Debug(String.Format()) versus log.DebugFormat()" />
<meta property="og:description" content="Log4net is one of the most popular opensource logging frameworks available in the .NET world. I&rsquo;ve been using this framework for over a year now, and today I discovered something new.
I often use string.Format() to format my log messages. Earlier this morning I made a typo formatting my message and an Exception was thrown in the beginning of my method which caused the application flow to break. You can avoid this by using the DebugFormat() method." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2010/01/log4net-log.debugstring.format-versus-log.debugformat/" />
<meta property="article:published_time" content="2010-01-20T20:30:00+01:00" />
<meta property="article:modified_time" content="2010-01-20T20:30:00+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Log4Net: log.Debug(String.Format()) versus log.DebugFormat()"/>
<meta name="twitter:description" content="Log4net is one of the most popular opensource logging frameworks available in the .NET world. I&rsquo;ve been using this framework for over a year now, and today I discovered something new.
I often use string.Format() to format my log messages. Earlier this morning I made a typo formatting my message and an Exception was thrown in the beginning of my method which caused the application flow to break. You can avoid this by using the DebugFormat() method."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">20</span>
							<span class="rest">Jan 2010</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Log4Net: log.Debug(String.Format()) versus log.DebugFormat()</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p><a href="http://logging.apache.org/log4net/index.html">Log4net</a> is one of the
most popular opensource logging frameworks available in the .NET world.
I&rsquo;ve been using this framework for over a year now, and today I
discovered something new.</p>
<p>I often use
<a href="http://msdn.microsoft.com/en-us/library/system.string.format.aspx">string.Format()</a>
to format my log messages. Earlier this morning I made a typo formatting
my message and an Exception was thrown in the beginning of my method
which caused the application flow to break. You can avoid this by using
the
<a href="http://logging.apache.org/log4net/release/sdk/log4net.ILog.DebugFormat_overloads.html">DebugFormat()</a>
method. If you mistype here, no Exception will be thrown, but a WARN
message will be logged.</p>
<p><!-- raw HTML omitted -->Example using
log.Debug(String.Format())<!-- raw HTML omitted --></p>
<pre><code>   1:  try

   2:  {

   3:      if (log.IsDebugEnabled)

   4:      {

   5:          log.Debug(&quot;Starting to insert item ABC_1.&quot;);

   6:          //Insert item ABC_1

   7:          log.Debug(string.Format(&quot;Item {0} inserted with success. Started inserting item {1}.&quot;, &quot;ABC_1&quot;));

   8:          log.Debug(&quot;Starting to insert item ABC_2.&quot;);

   9:          //Insert item ABC_2

  10:          log.Debug(string.Format(&quot;Inserted item {0}.&quot;, &quot;ABC_2&quot;));

  11:      }

  12:  }

  13:  catch (Exception ex)

  14:  {

  15:      log.Error(&quot;Woops&quot;, ex);

  16:  }
</code></pre>
<p>As expected this throws a
&ldquo;<a href="http://msdn.microsoft.com/en-us/library/system.formatexception.aspx">System.FormatException</a>:
Index (zero based) must be greater than or equal to zero and less than
the size of the argument list.&rdquo;</p>
<p><!-- raw HTML omitted -->Example using log.DebugFormat()<!-- raw HTML omitted --></p>
<pre><code>   1:  try

   2:  {

   3:      if (log.IsDebugEnabled)

   4:      {

   5:          log.Debug(&quot;Starting to insert item ABC_1.&quot;);

   6:          //Insert item ABC_1

   7:          log.DebugFormat(&quot;Item {0} inserted with success. Started inserting item {1}.&quot;, &quot;ABC_1&quot;);

   8:          log.Debug(&quot;Starting to insert item ABC_2.&quot;);

   9:          //Insert item ABC_2

  10:          log.Debug(string.Format(&quot;Inserted item {0}.&quot;, &quot;ABC_2&quot;));

  11:      }

  12:  }

  13:  catch (Exception ex)

  14:  {

  15:      log.Error(&quot;Woops&quot;, ex);

  16:  }
</code></pre>
<p>Using DebugFormat() the logger logs a WARN message, but it doesn&rsquo;t break
the application flow.</p>
<pre><code>   1:  WARN StringFormat: Exception while rendering format [Item {0} inserted with

   2:  success. Started inserting item {1}.]
</code></pre>
<p>So to avoid logging breaking your application, you should use the
DebugFormat(), WarningFormat(), InfoFormat(), ErrorFormat() methods
instead of String.Format() to format your log message. This should be a
best practice.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/codesnippets">CodeSnippets</a></li>
							
							<li><a href="/tags/opensource">Opensource</a></li>
							
							<li><a href="/tags/tips">Tips</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2010  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
