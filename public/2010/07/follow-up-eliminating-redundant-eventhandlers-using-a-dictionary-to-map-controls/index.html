<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Follow up: Eliminating redundant eventhandlers using a dictionary to map controls - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Follow up: Eliminating redundant eventhandlers using a dictionary to map controls">
<meta itemprop="description" content="Yesterday I blogged on &lsquo;WebForms refactoring: Eliminating redundant eventhandlers using a dictionary to map controls&#39;. In this post I went from bad code to better code. A smart reader gave me some good pointers on how to improve this code some more. Another iteration was necessary.
Losing the LinqIn the previous iteration I used Linq to search my dictionary.
 1: var res = mappings.Where(map =&gt; map.Key.Equals((CheckBox)sender)).First();  This is overhead, because the dictionary implements an indexer.">
<meta itemprop="datePublished" content="2010-07-13T20:55:00&#43;02:00" />
<meta itemprop="dateModified" content="2010-07-13T20:55:00&#43;02:00" />
<meta itemprop="wordCount" content="292">



<meta itemprop="keywords" content="CodeSnippets,.NET,ASP.NET,Refactoring,Tips," /><meta property="og:title" content="Follow up: Eliminating redundant eventhandlers using a dictionary to map controls" />
<meta property="og:description" content="Yesterday I blogged on &lsquo;WebForms refactoring: Eliminating redundant eventhandlers using a dictionary to map controls&#39;. In this post I went from bad code to better code. A smart reader gave me some good pointers on how to improve this code some more. Another iteration was necessary.
Losing the LinqIn the previous iteration I used Linq to search my dictionary.
 1: var res = mappings.Where(map =&gt; map.Key.Equals((CheckBox)sender)).First();  This is overhead, because the dictionary implements an indexer." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2010/07/follow-up-eliminating-redundant-eventhandlers-using-a-dictionary-to-map-controls/" />
<meta property="article:published_time" content="2010-07-13T20:55:00+02:00" />
<meta property="article:modified_time" content="2010-07-13T20:55:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Follow up: Eliminating redundant eventhandlers using a dictionary to map controls"/>
<meta name="twitter:description" content="Yesterday I blogged on &lsquo;WebForms refactoring: Eliminating redundant eventhandlers using a dictionary to map controls&#39;. In this post I went from bad code to better code. A smart reader gave me some good pointers on how to improve this code some more. Another iteration was necessary.
Losing the LinqIn the previous iteration I used Linq to search my dictionary.
 1: var res = mappings.Where(map =&gt; map.Key.Equals((CheckBox)sender)).First();  This is overhead, because the dictionary implements an indexer."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">13</span>
							<span class="rest">Jul 2010</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Follow up: Eliminating redundant eventhandlers using a dictionary to map controls</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>Yesterday I blogged on &lsquo;<a href="http://jclaes.blogspot.com/2010/07/webforms-refactoring-eliminating.html">WebForms refactoring: Eliminating redundant
eventhandlers using a dictionary to map
controls</a>'.
In this post I went from bad code to better code. A smart reader gave me
some good pointers on how to improve <a href="http://jclaes.blogspot.com/2010/07/webforms-refactoring-eliminating.html">this
code</a>
some more. Another iteration was necessary.</p>
<p><!-- raw HTML omitted -->Losing the Linq<!-- raw HTML omitted --></p>
<p>In the previous iteration I used Linq to search my dictionary.</p>
<pre><code>  1:  var res = mappings.Where(map =&gt; map.Key.Equals((CheckBox)sender)).First();
</code></pre>
<p>This is overhead, because the dictionary implements an
<a href="http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx">indexer</a>.</p>
<pre><code>   1:  TextBox[] textBoxes = mappings[checkBox];
</code></pre>
<p><!-- raw HTML omitted -->Eliminating unnecessary casts<!-- raw HTML omitted --></p>
<p>When I got the right dictionary entry I casted the value of the entry to
an array of textboxes.</p>
<pre><code>   1:  TextBox[] textBoxes = (TextBox[])res.Value;
</code></pre>
<p>Casting the value is unnecessary because I&rsquo;m using a <a href="http://msdn.microsoft.com/en-us/library/xfhwa508.aspx">generic
dictionary</a>!</p>
<pre><code>   1:  TextBox[] textBoxes = mappings[checkBox];
</code></pre>
<p><!-- raw HTML omitted -->Saving a few CPU cycles<!-- raw HTML omitted --></p>
<p>I only need to do something with my textboxes when my checkbox is not
checked. Evaluating the Checked property of the sender before doing
something prevents executing useless code.</p>
<pre><code>    1:  protected void chkCase_CheckedChanged(object sender, EventArgs e)

   2:  {

   3:      CheckBox checkBox = (CheckBox)sender;

   4:   

   5:      if (checkBox.Checked)

   6:      {

   7:          return;

   8:      }

   9:      else

  10:      {

  11:          Dictionary&lt;CheckBox, TextBox[]&gt; mappings = new Dictionary&lt;CheckBox, TextBox[]&gt;()

  12:          {

  13:              {this.chkCaseOne, new TextBox[] {this.txtCaseOneFirst, this.txtCaseOneSecond}},

  14:              {this.chkCaseTwo, new TextBox[] {this.txtCaseTwoFirst, this.txtCaseTwoSecond}},

  15:              {this.chkCaseThree, new TextBox[] {this.txtCaseThreeFirst, this.txtCaseThreeSecond}}

  16:          };

  17:   

  18:          TextBox[] textBoxes = mappings[checkBox];

  19:          

  20:          foreach (TextBox textBox in textBoxes)

  21:          {

  22:              textBox.Text = string.Empty;

  23:          }        

  24:      }

  25:  }      
</code></pre>
<p><!-- raw HTML omitted -->An extra pair of eyes<!-- raw HTML omitted --></p>
<p>Thanks for pointing out the things that were still wrong. These
improvements have taken this code snippet to another level again. This
also proves how having an extra pair of eyes can improve the quality of
your code significantly!</p>
<p><!-- raw HTML omitted -->I&rsquo;m pretty sure there is still room for
some more optimizations?<!-- raw HTML omitted --></p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/codesnippets">CodeSnippets</a></li>
							
							<li><a href="/tags/.net">.NET</a></li>
							
							<li><a href="/tags/asp.net">ASP.NET</a></li>
							
							<li><a href="/tags/refactoring">Refactoring</a></li>
							
							<li><a href="/tags/tips">Tips</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2010  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
