<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Print out the maximum depth of recursion allowed - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Print out the maximum depth of recursion allowed">
<meta itemprop="description" content="Karl Seguin tweeted the following earlier this week: &ldquo;An interview question I sometimes ask: Write code that prints out the maximum depth of recursion allowed.&rdquo;
This question is interesting for a couple of reasons. First, it&rsquo;s a shorter FizzBuzz; can the candidate open an IDE, write a few lines of code, compile and run them? And second, does he know what recursion is?
Now let&rsquo;s say, the interviewee knows how to write code and is familiar with the concept of recursion.">
<meta itemprop="datePublished" content="2014-10-19T17:33:00&#43;02:00" />
<meta itemprop="dateModified" content="2014-10-19T17:33:00&#43;02:00" />
<meta itemprop="wordCount" content="403">



<meta itemprop="keywords" content="code," /><meta property="og:title" content="Print out the maximum depth of recursion allowed" />
<meta property="og:description" content="Karl Seguin tweeted the following earlier this week: &ldquo;An interview question I sometimes ask: Write code that prints out the maximum depth of recursion allowed.&rdquo;
This question is interesting for a couple of reasons. First, it&rsquo;s a shorter FizzBuzz; can the candidate open an IDE, write a few lines of code, compile and run them? And second, does he know what recursion is?
Now let&rsquo;s say, the interviewee knows how to write code and is familiar with the concept of recursion." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jefclaes.be/2014/10/print-out-maximum-depth-of-recursion.html" />
<meta property="article:published_time" content="2014-10-19T17:33:00+02:00" />
<meta property="article:modified_time" content="2014-10-19T17:33:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Print out the maximum depth of recursion allowed"/>
<meta name="twitter:description" content="Karl Seguin tweeted the following earlier this week: &ldquo;An interview question I sometimes ask: Write code that prints out the maximum depth of recursion allowed.&rdquo;
This question is interesting for a couple of reasons. First, it&rsquo;s a shorter FizzBuzz; can the candidate open an IDE, write a few lines of code, compile and run them? And second, does he know what recursion is?
Now let&rsquo;s say, the interviewee knows how to write code and is familiar with the concept of recursion."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://jefclaes.be/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://jefclaes.be/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://jefclaes.be/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://jefclaes.be/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://jefclaes.be/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://jefclaes.be/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/jefclaes" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/jefclaes" title="LinkedIn"><i data-feather="linkedin"></i></a></li><li><a href="http://feed.jefclaes.be" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">19</span>
							<span class="rest">Oct 2014</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Print out the maximum depth of recursion allowed</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p><a href="https://twitter.com/karlseguin">Karl Seguin</a> tweeted the following
earlier this week: &ldquo;An interview question I sometimes ask: Write code
that prints out the maximum depth of recursion allowed.&rdquo;</p>
<p>This question is interesting for a couple of reasons. First, it&rsquo;s a
shorter
<a href="http://blog.codinghorror.com/why-cant-programmers-program/">FizzBuzz</a>;
can the candidate open an IDE, write a few lines of code, compile and
run them? And second, does he know what recursion is?</p>
<p>Now let&rsquo;s say, the interviewee knows how to write code and is familiar
with the concept of recursion. If he had to do this exercise in C#, he
might come up with something along these lines.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#859900">static</span> <span style="color:#859900">void</span> <span style="color:#268bd2">Main</span>()
{
    <span style="color:#268bd2">Recursive</span>(<span style="color:#2aa198;font-weight:bold">0</span>);
}

<span style="color:#859900">static</span> <span style="color:#859900">void</span> <span style="color:#268bd2">Recursive</span>(<span style="color:#859900;font-weight:bold">int</span> <span style="color:#268bd2">i</span>)
{
    <span style="color:#268bd2">Console</span>.<span style="color:#268bd2">WriteLine</span>(<span style="color:#268bd2">i</span>);
    <span style="color:#268bd2">Recursive</span>(<span style="color:#268bd2">i</span> + <span style="color:#2aa198;font-weight:bold">1</span>);
}
</code></pre></div><p>Before you let him run his code, you ask him to guess the output of this
little program. If he&rsquo;s smart, he won&rsquo;t give you much of an answer.
Instead he will point out that the result depends on the runtime,
compiler, compiler switches, machine architecture, the amount of
available memory and what not.</p>
<p>If he&rsquo;s not familiar with the C# compiler and runtime, he might even
say there&rsquo;s a chance the integer will overflow before the call stack
does.<br>
The recursive method call is the last call in this method, making it
tail-recursive. A smart compiler might detect the tail-recursion and
convert the recursive call into a plain loop, avoiding recursion.</p>
<p>Running this program shows that the C# compiler isn&rsquo;t that smart, and
will yield the maximum depth of recursion just before crashing.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">...
171424
171425
171426
171427
Process is terminated due to StackOverflowException.
</code></pre></div><p>If we were to port this snippet to F#, a functional language in which
recursion is a first class citizen, the results are a bit different.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#859900">let</span> <span style="color:#268bd2">rec</span> <span style="color:#268bd2">recursiveFun</span> <span style="color:#268bd2">i</span> =
    <span style="color:#268bd2">Console</span>.<span style="color:#268bd2">WriteLine</span>(<span style="color:#268bd2">i</span>.<span style="color:#268bd2">ToString</span><span style="color:#268bd2">()</span>) 
    <span style="color:#268bd2">recursiveFun</span> (<span style="color:#268bd2">i</span> + <span style="color:#268bd2">1</span>)
 
<span style="color:#268bd2">recursiveFun</span> <span style="color:#268bd2">0</span>
</code></pre></div><p>This just kept running until I killed it when the count was far over
171427. Looking at the generated IL, you can see that the compiler was
smart enough to turn this recursive function into a loop.</p>
<p>If we want the F# implementation to behave more like the C# one, we
need to make sure the compiler doesn&rsquo;t optimize for tail recursion.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fsharp" data-lang="fsharp"><span style="color:#859900">let</span> <span style="color:#268bd2">rec</span> <span style="color:#268bd2">recursiveFun</span> <span style="color:#268bd2">i</span> =
    <span style="color:#268bd2">Console</span>.<span style="color:#268bd2">WriteLine</span>(<span style="color:#268bd2">i</span>.<span style="color:#268bd2">ToString</span><span style="color:#268bd2">()</span>) 
    <span style="color:#268bd2">recursiveFun</span> (<span style="color:#268bd2">i</span> + <span style="color:#268bd2">1</span>)
 
<span style="color:#268bd2">recursiveFun</span> <span style="color:#268bd2">0</span>
</code></pre></div><p>Running this also ends in a StackOverflowException pretty early on.</p>
<p>I love how this question seems shallow at the surface, but gives away
more and more depth the harder you look.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/code">code</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2014  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-6239073-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
