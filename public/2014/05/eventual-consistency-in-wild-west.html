<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Eventual consistency in the Wild West - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Eventual consistency in the Wild West">
<meta itemprop="description" content="San Francisco, 1852. With the California Gold Rush at its peak, successful gold-seekers wanted to protect all their precious gold nuggets by storing them in a strong safe. At the time, it wasn&rsquo;t that easy to have access to a safe though. At the very beginning, it were just a few local merchants that owned one. Not much later, bankers swamped the area hoping to get their piece of the pie - bringing the strongest safes money can buy.">
<meta itemprop="datePublished" content="2014-05-25T18:01:00&#43;02:00" />
<meta itemprop="dateModified" content="2014-05-25T18:01:00&#43;02:00" />
<meta itemprop="wordCount" content="1251">



<meta itemprop="keywords" content="story," /><meta property="og:title" content="Eventual consistency in the Wild West" />
<meta property="og:description" content="San Francisco, 1852. With the California Gold Rush at its peak, successful gold-seekers wanted to protect all their precious gold nuggets by storing them in a strong safe. At the time, it wasn&rsquo;t that easy to have access to a safe though. At the very beginning, it were just a few local merchants that owned one. Not much later, bankers swamped the area hoping to get their piece of the pie - bringing the strongest safes money can buy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jefclaes.be/2014/05/eventual-consistency-in-wild-west.html" />
<meta property="article:published_time" content="2014-05-25T18:01:00+02:00" />
<meta property="article:modified_time" content="2014-05-25T18:01:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Eventual consistency in the Wild West"/>
<meta name="twitter:description" content="San Francisco, 1852. With the California Gold Rush at its peak, successful gold-seekers wanted to protect all their precious gold nuggets by storing them in a strong safe. At the time, it wasn&rsquo;t that easy to have access to a safe though. At the very beginning, it were just a few local merchants that owned one. Not much later, bankers swamped the area hoping to get their piece of the pie - bringing the strongest safes money can buy."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://jefclaes.be/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://jefclaes.be/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://jefclaes.be/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://jefclaes.be/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://jefclaes.be/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://jefclaes.be/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="https://twitter.com/jefclaes" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://www.linkedin.com/in/jefclaes" title="LinkedIn"><i data-feather="linkedin"></i></a></li><li><a href="http://feed.jefclaes.be" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">25</span>
							<span class="rest">May 2014</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Eventual consistency in the Wild West</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>San Francisco, 1852. With the California Gold Rush at its peak,
successful gold-seekers wanted to protect all their precious gold
nuggets by storing them in a strong safe. At the time, it wasn&rsquo;t that
easy to have access to a safe though. At the very beginning, it were
just a few local merchants that owned one. Not much later, bankers
swamped the area hoping to get their piece of the pie - bringing the
strongest safes money can buy.</p>
<p>James King of William - who had made a fortune himself mining gold - was
one of the first to found a trustworthy bank in San Francisco.<br>
With the city growing from a small 200 residents in 1846 to about 36.000
in 1852, it became harder and harder for the bank to accommodate all
their customers in that one office. It needed to expand its
operations.<br>
Three months later a new branch opened up on the other side of town.
James determined to build a strong brand, wanted to allow customers to
go to any of the two branches to deposit and withdraw their money. This
meant that the books of the two branches had to be kept consistent. To
maintain the books, James commanded all the clerks to duplicate all new
records. Two hired horsemen would then come in every few hours and bring
those records to the other branch. Since the books were now the same in
both branches, customers could deposit and withdraw money in both sides
of town. For James, life was good, he was now raking in twice as much.</p>
<p>Pancho and Lefty, two bandits fled from Mexico, trying their luck in
California, were instead of spending their Friday afternoon in search of
gold, trying to forget their gold drought by playing cards and drinking
cheap Whiskey in the local saloon. While Lefty kept rambling on about
how unlucky they had been these last few weeks, Pancho paid closer
attention to the conversation going on between the saloon keeper and
this well-dressed rider that had just entered. The leather bound
notebook the rider was carrying stood out immediately - it carried this
familiar looking mark and looked expensive. Even though Lefty kept on
rambling, Pancho could make up quite a bit eavesdropping on the saloon
keeper and the rider&rsquo;s conversation. That suddenly came to an end
though, when the rider knocked back his drink and got ready to leave -
&ldquo;Well, I better get going before the boss man notices that his books are
no longer up to date.&rdquo;<br>
Pancho watched the rider step outside and get back on his horse. Once
the rider was out of sight, Pancho with an intense gleam in his eyes,
cut off Lefty and ordered him to shut his mouth - &ldquo;Shut it fool, I have
a plan that&rsquo;s going to make us some easy money.&rdquo;</p>
<p>That same day, Pancho and Lefty gathered all their coins, opened an
account for Pancho at James King&rsquo;s bank and made their first deposit.
Afterwards, they stuck around the bank&rsquo;s side entrance just to make sure
one of the horsemen came by to pick up the books. Twenty minutes later,
the same rider they saw at the saloon showed up - Pancho and Lefty
spontaneously looked the other way, avoiding to be seen by the rider.
They hung around a little longer, to verify that when the driver exited
the bank, he was carrying a notebook - a notebook containing the records
of the account they just opened and their first deposit.</p>
<p>The next day, Pancho and Lefty got up early. They only got a few hours
of shut-eye in, they had been up all night sneaking around, scouting the
biggest ranch in town. To make their plan work, they needed to borrow a
fast horse.<br>
Impatiently waiting in front of the bank, Lefty breathed a sigh of
relief when the clerk opened the bank at nine AM sharp. Before he
entered, he looked one more time to the left, where Lefty was standing
in the shadows holding the horse - ready to go. Being the first customer
to enter the bank, he walked straight up to the counter, pulled out his
token of authentication and told the clerk he wanted to make a
withdrawal for all that was on his balance. The clerk looked at the
token carefully, but didn&rsquo;t ask any further questions - he still
remembered seeing Pancho yesterday, it wasn&rsquo;t like he owned a fortune.</p>
<p>Money in hand, Pancho firmly walked out of the bank. To make the plan
work, he now needed to jump on that horse as quickly as possible and
ride off to the branch on the other side of town - if he made it there
before the hired horsemen had the chance to transfer the latest records,
he might be able to double his assets in a single morning.</p>
<p>Pancho didn&rsquo;t spare the horse at all, frantically digging his spurs into
its sides. He made sure to take the dirt road through town, avoiding
obstacles and people where he could.<br>
Tying the horse down next to the bank, he watched one of the horsemen
walk out of the bank. Damn. Had he been too slow, were the books already
consistent again?<br>
Pancho broke out in a cold sweat, but he had to try. He shuffled into
the bank and got in line - there were three customers in front of him.
Every time he looked up at the clock, he got more anxious. By the time
his turn came, he was terrified. Without looking up, he pulled out his
token of authentication once more, and mumbled to the clerk that he
wanted to withdraw all of his money. The clerk noticed the drops of
sweat on Pancho&rsquo;s forehead and how Pancho&rsquo;s hands were shaking. &ldquo;Poor
soul,&rdquo; the clerk thought, &ldquo;he must have caught cholera like many others,
they&rsquo;re falling like flies.&rdquo; The clerk went into the back, looked into
the books, opened the safe and handed Pancho everything he was worth.</p>
<p>James King spent very little of his time at one of his banks - he was
too busy looking for new ventures to fund. When he was in town and had
the time, he did make a habit of jumping by to look in the books right
before closing time. Today, one of the clerks walked up to James King as
soon as he arrived; &ldquo;I&rsquo;m afraid there has been made a mistake in the
books, sir. The books show that one customer withdrew all of his money
twice today. First here, and then in the other branch. Something must
have gone wrong copying the records.&rdquo; Going through the records, it was
obvious to James King what had happened; they had been robbed.</p>
<p>&ldquo;Thank the lord that it&rsquo;s only for a small amount. Let&rsquo;s make sure this
doesn&rsquo;t happen again.&rdquo; James started by hiring two extra horsemen, but
to be even more sure he also had to introduce some new rules. A customer
could now only withdraw $5 a day, unless he had proven to be a good and
reliable customer. If a customer needed to withdraw extraordinary large
amounts, he needed to inform a specific branch one day in advance. This
allowed both branches to keep serving all customers smoothly while not
giving up on operating in a semi-autonomous fashion. James was even
considering opening a new branch in the famous city of angels, Los
Angeles.</p>
<p>Next time; isolation levels in the Wild West.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/story">story</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2014  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-6239073-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
