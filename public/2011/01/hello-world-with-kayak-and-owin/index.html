<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Hello world with Kayak and OWIN - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Hello world with Kayak and OWIN">
<meta itemprop="description" content="Kayak is a lightweight opensource C# webserver which implements OWIN. OWIN stands for Open Web Interface for .NET.
Hello World
Hosting your own application using Kayak is relatively simple.
In this example I&rsquo;m using a console application to run the Kayak webserver. This application has one dependency: the Kayak project.
First create a new instance of the DotNetServer. This class is an IKayakServer implementation using System.NET.Sockets.Socket. Once the instance is created you can call the Start() method.">
<meta itemprop="datePublished" content="2011-01-23T19:00:00&#43;01:00" />
<meta itemprop="dateModified" content="2011-01-23T19:00:00&#43;01:00" />
<meta itemprop="wordCount" content="363">



<meta itemprop="keywords" content=".NET," /><meta property="og:title" content="Hello world with Kayak and OWIN" />
<meta property="og:description" content="Kayak is a lightweight opensource C# webserver which implements OWIN. OWIN stands for Open Web Interface for .NET.
Hello World
Hosting your own application using Kayak is relatively simple.
In this example I&rsquo;m using a console application to run the Kayak webserver. This application has one dependency: the Kayak project.
First create a new instance of the DotNetServer. This class is an IKayakServer implementation using System.NET.Sockets.Socket. Once the instance is created you can call the Start() method." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2011/01/hello-world-with-kayak-and-owin/" />
<meta property="article:published_time" content="2011-01-23T19:00:00+01:00" />
<meta property="article:modified_time" content="2011-01-23T19:00:00+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Hello world with Kayak and OWIN"/>
<meta name="twitter:description" content="Kayak is a lightweight opensource C# webserver which implements OWIN. OWIN stands for Open Web Interface for .NET.
Hello World
Hosting your own application using Kayak is relatively simple.
In this example I&rsquo;m using a console application to run the Kayak webserver. This application has one dependency: the Kayak project.
First create a new instance of the DotNetServer. This class is an IKayakServer implementation using System.NET.Sockets.Socket. Once the instance is created you can call the Start() method."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">23</span>
							<span class="rest">Jan 2011</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Hello world with Kayak and OWIN</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p><a href="https://github.com/kayak/kayak">Kayak</a> is a lightweight opensource C#
webserver which implements <a href="http://owin.github.com/spec.html">OWIN</a>.
<a href="http://owin.github.com/spec.html">OWIN</a> stands for Open Web Interface
for .NET.</p>
<p><strong>Hello World</strong></p>
<p>Hosting your own application using Kayak is relatively simple.</p>
<p>In this example I&rsquo;m using a console application to run the Kayak
webserver. This application has one dependency: the Kayak project.</p>
<p>First create a new instance of the DotNetServer. This class is an
IKayakServer implementation using
<a href="http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx">System.NET.Sockets.Socket</a>.
Once the instance is created you can call the Start() method. This
method returns an
<a href="http://msdn.microsoft.com/en-us/library/system.idisposable.aspx">IDisposable</a>,
which needs to be disposed once the server should stop listening. Once
the server is started you can host your OwinApplication, which is a
delegate with three arguments.</p>
<pre><code>   1:  static void Main() {

   2:      var server = new DotNetServer();

   3:      var pipe = server.Start();

   4:   

   5:      server.Host(HelloWorldOwinApp);

   6:   

   7:      Console.WriteLine(string.Format(&quot;Listening on {0}..&quot;, server.ListenEndPoint));

   8:      Console.ReadLine();

   9:   

  10:      pipe.Dispose();

  11:  }
</code></pre>
<p>The first argument is an environment dictionary which represents the
request the application needs to process. The second argument is a
response callback which defines the status, headers and bodydata of the
HTTP response. The final argument is the error callback which can be
used to trap internal errors and return an appropriate response.</p>
<p>In this example, I&rsquo;m reading the path from the environment dictionary
and I&rsquo;m only returning a simple &ldquo;Hello world&rdquo; HTTP response when it
equals &ldquo;/HelloWorld&rdquo;.</p>
<pre><code>   1:  public static void HelloWorldOwinApp(IDictionary&lt;string, object&gt; env,

   2:      Action&lt;string, IDictionary&lt;string, IList&lt;string&gt;&gt;, IEnumerable&lt;object&gt;&gt; response,

   3:      Action&lt;Exception&gt; error) {

   4:          var path = env[&quot;Owin.RequestUri&quot;] as string;

   5:   

   6:          if (path.Equals(&quot;/HelloWorld&quot;, StringComparison.OrdinalIgnoreCase)) {

   7:              var status = &quot;200 OK&quot;;

   8:              var headers = new Dictionary&lt;string, IList&lt;string&gt;&gt;(){

   9:                                  { &quot;Content-Type&quot;, new string[] {&quot;text/plain&quot;}}

  10:                              };

  11:              var bodyData = new object[] { Encoding.ASCII.GetBytes(&quot;Hello world!&quot;) };

  12:   

  13:              response(status, headers, bodyData);

  14:          }               

  15:  }
</code></pre>
<p>If you run this example you should be able to browse to
<a href="http://localhost:1111/HelloWorld">http://localhost:1111/HelloWorld</a> and get a response.</p>
<p><a href="/post/images/2011-01-23-hello-world-with-kayak-and-owin-owinhelloworld.PNG"><img src="/post/images/thumbnails/2011-01-23-hello-world-with-kayak-and-owin-owinhelloworld.PNG" alt=""></a><br>
<strong>Conclusion</strong></p>
<p>I thinks it&rsquo;s great we can start building our own lightweight webservers
where the abstractions are in the perfect size to give us full control,
without getting too complicated. I foresee a promising future for the
OWIN initiative and the Kayak project.</p>
<p><strong>Download the source</strong></p>
<p>You can <a href="http://dl.dropbox.com/u/19698383/Blog/KayakHelloWorld.rar">download the source of this example
here</a>.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/.net">.NET</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2011  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
