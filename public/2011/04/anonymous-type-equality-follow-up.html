<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Anonymous type equality follow-up: Equals() - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Anonymous type equality follow-up: Equals()">
<meta itemprop="description" content="After publishing yesterday&rsquo;s post on anonymous type equality, I received an interesting comment. The comment stated that even if the sequence of the property assignment were the same, the equality comparison would still return false, because the types generated by the C# compiler are reference types, making their references being tested for equality and not their data.
This is very true, unless the Equals() method is overridden. And this is exactly what the compiler does for us when we define anonymous types.">
<meta itemprop="datePublished" content="2011-04-24T12:30:00&#43;02:00" />
<meta itemprop="dateModified" content="2011-04-24T12:30:00&#43;02:00" />
<meta itemprop="wordCount" content="142">



<meta itemprop="keywords" content="code," /><meta property="og:title" content="Anonymous type equality follow-up: Equals()" />
<meta property="og:description" content="After publishing yesterday&rsquo;s post on anonymous type equality, I received an interesting comment. The comment stated that even if the sequence of the property assignment were the same, the equality comparison would still return false, because the types generated by the C# compiler are reference types, making their references being tested for equality and not their data.
This is very true, unless the Equals() method is overridden. And this is exactly what the compiler does for us when we define anonymous types." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2011/04/anonymous-type-equality-follow-up.html" />
<meta property="article:published_time" content="2011-04-24T12:30:00+02:00" />
<meta property="article:modified_time" content="2011-04-24T12:30:00+02:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Anonymous type equality follow-up: Equals()"/>
<meta name="twitter:description" content="After publishing yesterday&rsquo;s post on anonymous type equality, I received an interesting comment. The comment stated that even if the sequence of the property assignment were the same, the equality comparison would still return false, because the types generated by the C# compiler are reference types, making their references being tested for equality and not their data.
This is very true, unless the Equals() method is overridden. And this is exactly what the compiler does for us when we define anonymous types."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">24</span>
							<span class="rest">Apr 2011</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Anonymous type equality follow-up: Equals()</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>After publishing <a href="https://www.jefclaes.be/2011/04/anonymous-type-equality.html">yesterday&rsquo;s post on anonymous type
equality</a>,
I received an interesting comment. The comment stated that
even if the sequence of the property assignment were the same, the
equality comparison would still return false, because the types
generated by the C# compiler are reference types, making their
references being tested for equality and not their data.</p>
<p>This is very true, unless the <code>Equals()</code> method is overridden. And this is exactly what the compiler does for us when we define anonymous types.<br>
<a href="/post/images/2011-04-24-anonymous-type-equality-follow-up-equals-anonymoustypeequals.PNG"><img src="/post/images/thumbnails/2011-04-24-anonymous-type-equality-follow-up-equals-anonymoustypeequals.PNG" alt=""></a><br>
In the <code>Equals()</code> method the equality of each property is evaluated by
using a <a href="http://msdn.microsoft.com/en-us/library/ms132123.aspx">generic EqualityComparer</a>.</p>
<p>That explains this behaviour.</p>
<div class="highlight"><pre style="color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-csharp" data-lang="csharp"><span style="color:#859900;font-weight:bold">var</span> <span style="color:#268bd2">a</span> = <span style="color:#859900">new</span> { <span style="color:#268bd2">x</span> = <span style="color:#2aa198;font-weight:bold">1</span>, <span style="color:#268bd2">y</span> = <span style="color:#2aa198;font-weight:bold">2</span> };
<span style="color:#859900;font-weight:bold">var</span> <span style="color:#268bd2">b</span> = <span style="color:#859900">new</span> { <span style="color:#268bd2">y</span> = <span style="color:#2aa198;font-weight:bold">2</span>, <span style="color:#268bd2">x</span> = <span style="color:#2aa198;font-weight:bold">1</span> };
<span style="color:#859900;font-weight:bold">var</span> <span style="color:#268bd2">c</span> = <span style="color:#859900">new</span> { <span style="color:#268bd2">x</span> = <span style="color:#2aa198;font-weight:bold">1</span>, <span style="color:#268bd2">y</span> = <span style="color:#2aa198;font-weight:bold">2</span> };

<span style="color:#268bd2">Console</span>.<span style="color:#268bd2">WriteLine</span>(<span style="color:#268bd2">a</span>.<span style="color:#268bd2">Equals</span>(<span style="color:#268bd2">b</span>)); <span style="color:#93a1a1;font-style:italic">//False
</span><span style="color:#93a1a1;font-style:italic"></span><span style="color:#268bd2">Console</span>.<span style="color:#268bd2">WriteLine</span>(<span style="color:#268bd2">a</span>.<span style="color:#268bd2">Equals</span>(<span style="color:#268bd2">c</span>)); <span style="color:#93a1a1;font-style:italic">//True
</span></code></pre></div>
			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/code">code</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2011  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
