<!DOCTYPE html>
<html>
<head><script src="/livereload.js?port=1313&mindelay=10&v=2" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Adding ELMAH to an AppHarbor application - Jef Claes</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Adding ELMAH to an AppHarbor application">
<meta itemprop="description" content="For those who haven&rsquo;t heard of ELMAH yet, here is the project description.
 ELMAH (Error Logging Modules and Handlers) is an application-wide error logging facility that is completely pluggable. It can be dynamically added to a running ASP.NET web application, or even all ASP.NET web applications on a machine, without any need for re-compilation or re-deployment.
 While ELMAH is completely not AppHarbor specific, there do seem to be a fair amount of questions on the AppHarbor support forums on how to get ELMAH running.">
<meta itemprop="datePublished" content="2012-02-04T15:17:00&#43;01:00" />
<meta itemprop="dateModified" content="2012-02-04T15:17:00&#43;01:00" />
<meta itemprop="wordCount" content="420">



<meta itemprop="keywords" content="ASP.NET MVC,ASP.NET,Tips," /><meta property="og:title" content="Adding ELMAH to an AppHarbor application" />
<meta property="og:description" content="For those who haven&rsquo;t heard of ELMAH yet, here is the project description.
 ELMAH (Error Logging Modules and Handlers) is an application-wide error logging facility that is completely pluggable. It can be dynamically added to a running ASP.NET web application, or even all ASP.NET web applications on a machine, without any need for re-compilation or re-deployment.
 While ELMAH is completely not AppHarbor specific, there do seem to be a fair amount of questions on the AppHarbor support forums on how to get ELMAH running." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2012/02/adding-elmah-to-an-appharbor-application/" />
<meta property="article:published_time" content="2012-02-04T15:17:00+01:00" />
<meta property="article:modified_time" content="2012-02-04T15:17:00+01:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Adding ELMAH to an AppHarbor application"/>
<meta name="twitter:description" content="For those who haven&rsquo;t heard of ELMAH yet, here is the project description.
 ELMAH (Error Logging Modules and Handlers) is an application-wide error logging facility that is completely pluggable. It can be dynamically added to a running ASP.NET web application, or even all ASP.NET web applications on a machine, without any need for re-compilation or re-deployment.
 While ELMAH is completely not AppHarbor specific, there do seem to be a fair amount of questions on the AppHarbor support forums on how to get ELMAH running."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="http://localhost:1313/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="http://localhost:1313/">
				<img src="https://image.freepik.com/free-vector/young-man-head-with-beard-avatar-character_24877-36786.jpg" alt="Jef Claes" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="http://localhost:1313/">Jef Claes</a></h1>
	<div class="site-description"><p>On software and life</p><nav class="nav social">
			<ul class="flat"><li><a href="https://github.com/jefclaes" title="Github"><i data-feather="github"></i></a></li><li><a href="/index.xml" title="RSS"><i data-feather="rss"></i></a></li></ul>
		</nav></div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/post">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
				
					<div class="meta">
						<div class="date">
							<span class="day">04</span>
							<span class="rest">Feb 2012</span>
						</div>
					</div>
				
				<div class="matter">
					<h1 class="title">Adding ELMAH to an AppHarbor application</h1>
				</div>
			</div>
					
			<div class="markdown">
				<p>For those who haven&rsquo;t heard of <a href="http://code.google.com/p/elmah/">ELMAH</a>
yet, here is the project description.</p>
<blockquote>
<p>ELMAH (Error Logging Modules and Handlers) is an application-wide
error logging facility that is completely pluggable. It can be
dynamically added to a running ASP.NET web application, or even all
ASP.NET web applications on a machine, without any need for
re-compilation or re-deployment.</p>
</blockquote>
<p>While ELMAH is completely <strong>not</strong> <a href="https://appharbor.com/">AppHarbor</a>
specific, there do seem to be a <a href="http://feedback.appharbor.com/forums/95687-general/suggestions/1423059-add-support-for-elmah">fair
amount</a>
of
<a href="http://support.appharbor.com/discussions/problems/541-getting-elmah-to-work">questions</a>
on <a href="http://support.appharbor.com/discussions/problems/18-permissions-for-elmahaxd">the AppHarbor support
forums</a>
on how to get ELMAH running. I just installed and configured ELMAH for
one of my AppHarbor ASP.NET MVC3 applications, so I thought it would be
nice to share and give something back to the AppHarbor support guys.</p>
<p>I think enabling ELMAH shouldn&rsquo;t take more than 10 minutes if you follow
this tutorial.</p>
<p><strong>Installation</strong></p>
<p>The easiest way to add ELMAH to your web application is by installing
<a href="http://www.nuget.org/packages/elmah">the nuget package</a>.</p>
<pre><code>PM&gt; Install-Package elmah
Attempting to resolve dependency 'elmah.corelibrary (= 1.2)'.
Successfully installed 'elmah 1.2.0.1'.
Successfully added 'elmah 1.2.0.1' to Docary.
</code></pre>
<p>Once this is done you will find a newly added Elmah reference and a
changed web.config.</p>
<p>I&rsquo;m not going to list all the changes to the web.config here. If you&rsquo;re
interested in what the package does to your web.config, you should just
run a <a href="http://book.git-scm.com/3_comparing_commits_-_git_diff.html">git
diff</a>.</p>
<p><strong>Error log storage</strong></p>
<p>You have to tell ELMAH where it should store the logs. A list of error
logÂ implementations can be found <a href="http://code.google.com/p/elmah/wiki/ErrorLogImplementations">on the project
wiki</a>.</p>
<p>I choose to use the in-memory error log <em>for now</em>. Add the elmah section
and errorLog element to your web.config.</p>
<pre><code>&lt;elmah&gt;    
    &lt;errorLog type=&quot;Elmah.MemoryErrorLog, Elmah&quot; size=&quot;250&quot; /&gt;
&lt;/elmah&gt;
</code></pre>
<p><strong>Remote access</strong></p>
<p>By default you can only see the logging on the local machine. To enable
remote access, you have to add the security element to the elmah
section.</p>
<pre><code>&lt;elmah&gt;
    &lt;security allowRemoteAccess=&quot;1&quot; /&gt;
    &lt;errorLog type=&quot;Elmah.MemoryErrorLog, Elmah&quot; size=&quot;250&quot; /&gt;
&lt;/elmah&gt;
</code></pre>
<p><strong>Security</strong></p>
<p>Now that you&rsquo;re allowing remote access, you want to <a href="http://www.troyhunt.com/2012/01/aspnet-session-hijacking-with-google.html">secure the logging
page</a>.
I used ASP.NET authorization to achieve this.</p>
<p>Add the following element to your web.config, and make sure you change
the authorization configuration to the <strong>relevant values</strong>.</p>
<pre><code>&lt;location path=&quot;elmah.axd&quot;&gt;
    &lt;system.web&gt;
      &lt;httpHandlers&gt;
        &lt;add verb=&quot;POST,GET,HEAD&quot; path=&quot;elmah.axd&quot; type=&quot;Elmah.ErrorLogPageFactory, Elmah&quot; /&gt;
      &lt;/httpHandlers&gt;
      &lt;authorization&gt;
        &lt;allow roles=&quot;SuperUser&quot;/&gt;
        &lt;deny users=&quot;*&quot; /&gt;
      &lt;/authorization&gt;
    &lt;/system.web&gt;
    &lt;system.webServer&gt;
      &lt;handlers&gt;
        &lt;add name=&quot;ELMAH&quot; verb=&quot;POST,GET,HEAD&quot; path=&quot;elmah.axd&quot; type=&quot;Elmah.ErrorLogPageFactory, Elmah&quot; preCondition=&quot;integratedMode&quot; /&gt;
      &lt;/handlers&gt;
    &lt;/system.webServer&gt;
&lt;/location&gt;
</code></pre>
<p><strong>Finished</strong></p>
<p>**<br>
**</p>
<p>Push these changes, and you should be done. Navigate to elmah.axd in the
root of your web application and you should see something like this.</p>
<p><a href="/post/images/2012-02-04-adding-elmah-to-an-appharbor-application-Elmah.PNG"><img src="/post/images/thumbnails/2012-02-04-adding-elmah-to-an-appharbor-application-Elmah.PNG" alt=""></a></p>
<p>It should be easier now to start playing with <a href="http://code.google.com/p/elmah/wiki">more advanced ELMAH
options</a>.</p>

			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/asp.net-mvc">ASP.NET MVC</a></li>
							
							<li><a href="/tags/asp.net">ASP.NET</a></li>
							
							<li><a href="/tags/tips">Tips</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2012  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>

<script>feather.replace()</script>
</body>
</html>
